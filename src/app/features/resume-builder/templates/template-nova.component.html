<div class="nova">
  <header class="header">
    <div class="top">
      <div class="avatar">
        @if (resume.personal.photoDataUrl) {
          <img [src]="resume.personal.photoDataUrl" alt="Photo de profil" />
        } @else {
          <span aria-hidden="true">
            {{ (resume.personal.firstName || 'P').slice(0, 1) }}{{ (resume.personal.lastName || 'N').slice(0, 1) }}
          </span>
        }
      </div>

      <div class="full-name">
        {{ resume.personal.firstName || 'Prénom' }} <span>{{ resume.personal.lastName || 'Nom' }}</span>
      </div>
      @if (resume.personal.headline) {
        <div class="headline">{{ resume.personal.headline }}</div>
      }
    </div>

    <div class="meta">
      @if (resume.personal.email) {
        <span>
          <i class="bi bi-envelope-fill"></i>
          <span>{{ resume.personal.email }}</span>
        </span>
      }
      @if (resume.personal.phone) {
        <span>
          <i class="bi bi-telephone-fill"></i>
          <span>{{ resume.personal.phone }}</span>
        </span>
      }
      @if (resume.personal.location) {
        <span>
          <i class="bi bi-geo-alt-fill"></i>
          <span>{{ resume.personal.location }}</span>
        </span>
      }
      @if (resume.personal.website) {
        <span>
          <i class="bi bi-globe"></i>
          <span>{{ resume.personal.website }}</span>
        </span>
      }
      @if (resume.personal.linkedIn) {
        <span>
          <i class="bi bi-linkedin"></i>
          <span>{{ resume.personal.linkedIn }}</span>
        </span>
      }
      @if (resume.personal.github) {
        <span>
          <i class="bi bi-github"></i>
          <span>{{ resume.personal.github }}</span>
        </span>
      }
    </div>
  </header>

  <div class="body">
    @if (resume.personal.summary) {
      <section>
        <h3>Résumé</h3>
        <p>{{ resume.personal.summary }}</p>
      </section>
    }

    @if (resume.experience.length) {
      <section>
        <h3>Expérience</h3>
        @for (e of resume.experience; track $index) {
          <div class="row">
            <div class="row-main">
              <div class="row-title">
                <strong>{{ e.role || 'Poste' }}</strong>
                <span class="sep">·</span>
                <span>{{ e.company || 'Entreprise' }}</span>
              </div>
              @if (e.description) {
                <div class="row-desc">{{ e.description }}</div>
              }
            </div>
            <div class="row-side">
              <div class="dates">
                {{ e.startDate || '' }} @if (e.endDate) { <span>— {{ e.endDate }}</span> }
              </div>
              @if (e.location) {
                <div class="muted">
                  <i class="bi bi-geo-alt-fill"></i>
                  <span>{{ e.location }}</span>
                </div>
              }
            </div>
          </div>
        }
      </section>
    }

    @if (resume.education.length) {
      <section>
        <h3>Formation</h3>
        @for (ed of resume.education; track $index) {
          <div class="row">
            <div class="row-main">
              <div class="row-title">
                <strong>{{ ed.school || 'Établissement' }}</strong>
                @if (ed.degree || ed.field) {
                  <span class="sep">·</span>
                  <span>{{ ed.degree || '' }} @if (ed.field) { <span>({{ ed.field }})</span> }</span>
                }
              </div>
              @if (ed.description) {
                <div class="row-desc">{{ ed.description }}</div>
              }
            </div>
            <div class="row-side">
              <div class="dates">
                {{ ed.startDate || '' }} @if (ed.endDate) { <span>— {{ ed.endDate }}</span> }
              </div>
            </div>
          </div>
        }
      </section>
    }

    <div class="two">
      @if (resume.skills.length) {
        <section>
          <h3>Compétences</h3>
          <div class="chips">
            @for (s of resume.skills; track $index) {
              <span class="chip">{{ s.name }}</span>
            }
          </div>
        </section>
      }

      @if (resume.languages.length) {
        <section>
          <h3>Langues</h3>
          <div class="chips">
            @for (l of resume.languages; track $index) {
              <span class="chip">{{ l.name }} @if (l.level) { <span class="muted">({{ l.level }})</span> }</span>
            }
          </div>
        </section>
      }
    </div>

    @if (resume.interests.length) {
      <section>
        <h3>Centres d’intérêt</h3>
        <div class="chips">
          @for (i of resume.interests; track $index) {
            <span class="chip">{{ i }}</span>
          }
        </div>
      </section>
    }
  </div>
</div>

